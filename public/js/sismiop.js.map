{"version":3,"sources":["sismiop.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"sismiop.js","sourcesContent":["$.ajaxSetup({\r\n    headers: { 'X-CSRF-TOKEN': $('meta[name=\"_token\"]').attr('content') }\r\n});\r\n$.fn.rowCount = function() {\r\n    return $('tr', $(this).find('tbody')).length;\r\n};\r\nvar permission;\r\n$.extend({\r\n    getValues: function(url) {\r\n        var result = null;\r\n        $.ajax({\r\n            url: url,\r\n            type: 'get',\r\n            dataType: 'json',\r\n            async: false,\r\n            success: function(data) {\r\n                result = data;\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n});\r\n\r\nfunction getjson(url){\r\n    var result = null;\r\n    $.ajax({\r\n        url: url,\r\n        type: 'get',\r\n        dataType: 'json',\r\n        async: false,\r\n        success: function(data) {\r\n            result = data;\r\n        }\r\n    });\r\n     return result;\r\n} \r\nfunction numeralsOnly(evt) {\r\n    evt = (evt) ? evt : event;\r\n    var charCode = (evt.charCode) ? evt.charCode : ((evt.keyCode) ? evt.keyCode :\r\n    ((evt.which) ? evt.which : 0));\r\n        if (charCode > 31 && (charCode < 48 || charCode > 57) && (charCode != 46)) {\r\n            alert(\"Hanya Nomor yang bisa di input pada kolom ini.\");\r\n            console.log(evt);\r\n            return false;\r\n        }\r\n    return true;\r\n}\r\nfunction lettersOnly(evt) {\r\n    evt = (evt) ? evt : event;\r\n    var charCode = (evt.charCode) ? evt.charCode : ((evt.keyCode) ? evt.keyCode :\r\n        ((evt.which) ? evt.which : 0));\r\n    if (charCode > 31 && (charCode < 65 || charCode > 90) && (charCode < 97 || charCode > 122)) {\r\n        alert(\"hanya huruf saja.\");\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\nfunction ynOnly(evt) {\r\n    evt = (evt) ? evt : event;\r\n    var charCode = (evt.charCode) ? evt.charCode : ((evt.keyCode) ? evt.keyCode : ((evt.which) ? evt.which : 0));\r\n    if (charCode > 31 && charCode != 78 && charCode != 89 && charCode != 110 && charCode != 121) {\r\n    alert(\"Masukan hanya \\\"Y\\\" atau \\\"N\\\".\");\r\n\r\n    return false;\r\n    }\r\n    return true;\r\n}\r\nfunction rangeNumber(evt) {\r\n\r\n    evt = (evt) ? evt : event;\r\n    var charCode = (evt.charCode) ? evt.charCode : ((evt.keyCode) ? evt.keyCode :\r\n    ((evt.which) ? evt.which : 0));\r\n        if (charCode > 31 && (charCode < 48 || charCode > 57)) {\r\n            alert(\"Hanya Nomor yang bisa di input pada kolom ini.\");\r\n                $(this).val(0);\r\n            return false;\r\n        }\r\n        var max = 100;\r\n        var min = 0;\r\n        if ($(this).val() > max){\r\n             $(this).val(max);\r\n        }else if($(this).val() < min){\r\n             $(this).val(min);\r\n        }\r\n    return true;\r\n}\r\nfunction hasRole(name){\r\n    permission = getjson('/api/checkpermission');\r\n    var ret = null;\r\n    for(i in permission){\r\n        console.log(permission[i]);\r\n        if (permission[i] == name) {\r\n                return true;\r\n        }\r\n    }        \r\n}\r\nfunction base64image(resFile) {\r\n    var reader = new FileReader();\r\n    reader.readAsDataURL(resFile);\r\n    reader.onloadend = function(evt) {\r\n      return (evt.target.result);\r\n    }\r\n}\r\n(function($, window, document){\r\n    $(\"#loader-wrapper\").hide();\r\n}(jQuery, window, document));\r\n\r\n(function($, window, document){\r\n    $('.formConfirm').on('click', function(e) {\r\n        \r\n        e.preventDefault();\r\n        \r\n        if($(this).hasClass('disabled')) return;\r\n\r\n        var el = $(this).parent();\r\n        var title = el.attr('data-title');\r\n        var msg = el.attr('data-message');\r\n        var dataForm = el.attr('data-form');\r\n        \r\n        $('#formConfirm')\r\n        .find('#frm_body').html('<h6>'+msg+'</h6>')\r\n        .end().find('#frm_title').html(title)\r\n        .end().modal('show');\r\n        \r\n        $('#formConfirm').find('#frm_submit').attr('data-form', dataForm);\r\n    });\r\n\r\n    $('#formConfirm').on('click', '#frm_submit', function(e) {\r\n        var id = $(this).attr('data-form');\r\n        console.log(id);\r\n        $(id).submit();\r\n    });\r\n\r\n    \r\n}(jQuery, window, document));\r\n//Jam Online\r\n(function($, window, document){\r\n    if( $( '.rt-clock' ).length > 0 ){\r\n        var monthNames = [ 'Januari', 'Pebruari', 'Maret', 'April', 'Mei', 'Juni', 'Juli', 'Agustus', 'September', 'Oktober', 'Nopember', 'Desember' ];\r\n        var dayNames= [ 'Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jum\\'at', 'Sabtu' ];\r\n\r\n        var newDate = new Date();\r\n\r\n        newDate.setDate(newDate.getDate());\r\n\r\n        var date = dayNames[ newDate.getDay() ] + ', ' + newDate.getDate() + ' ' + monthNames[ newDate.getMonth() ] + ' ' + newDate.getFullYear();\r\n\r\n        $( '.rt-clock .date' ).html( date );\r\n\r\n        setInterval(\r\n            function() {\r\n                var seconds = new Date().getSeconds();\r\n                $(\".rt-clock .seconds\").html(( seconds < 10 ? \"0\" : \"\" ) + seconds);\r\n            },1000 );\r\n\r\n        setInterval(\r\n            function() {\r\n                var minutes = new Date().getMinutes();\r\n                $(\".rt-clock .minutes\").html(( minutes < 10 ? \"0\" : \"\" ) + minutes);\r\n            },1000);\r\n\r\n        setInterval(\r\n            function() {\r\n                var hours = new Date().getHours();\r\n                $(\".rt-clock .hours\").html(( hours < 10 ? \"0\" : \"\" ) + hours);\r\n            }, 1000);\r\n    }\r\n}(jQuery, window, document));\r\n\r\n//Upload\r\n(function($, window, document){\r\n    var hasChanged = false;\r\n    $(window).bind('beforeunload', function(){\r\n      if(hasChanged){\r\n        return \"You have unsaved changes\";\r\n        hasChanged = false;\r\n      } \r\n    });\r\n    $('input[type=text]').change(function(){\r\n        hasChanged = true;\r\n    });\r\n   \r\n    $('.formUpload').on('click', function(e) {\r\n        var bangunan_file = $(this).closest('span').find('.bangunan_file');\r\n        \r\n        if (bangunan_file.length > 0) {\r\n            bangunan_file.trigger('click');\r\n        }\r\n    });\r\n    $('.fileupload:file').change(function(){\r\n        var fileinput = $(this);\r\n        var file = this.files[0];\r\n        name = file.name;\r\n        size = file.size;\r\n        type = file.type;\r\n        \r\n        if(file.name.length < 1) {\r\n        }else if(file.size > 209715200) {\r\n            alert(\"File Terlalu Besar, Maksimal 200 Mb\");\r\n        }else if(file.type != 'image/png' && file.type != 'image/jpg' && file.type != 'image/gif' && file.type != 'image/jpeg' && file.type != 'application/pdf' && file.type != 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') {\r\n            alert(\"File tidak diijinkan untuk di upload\");\r\n            $(this).val('');\r\n        }else { \r\n            var formData = new FormData($('*formId*')[0]);\r\n            if(!!file.type.match(/.*/)){\r\n                formData.append(\"images\", file);\r\n            }\r\n                \r\n            $.ajax({\r\n                url: \"/kuesioner/bangunan/upload\",\r\n                type: \"POST\",\r\n                data: formData,\r\n                cache: false,\r\n                processData: false,\r\n                contentType: false,\r\n                dataType:'json',\r\n                beforeSend: function(){\r\n                    $(\"#loader-wrapper\").show();\r\n                },\r\n                complete: function(){   \r\n                    $(\"#loader-wrapper\").hide();\r\n                },\r\n                success: function(data){\r\n                    if($('.bangunan_foto').length > 0) {\r\n                        fileinput.closest('div.controlupload').find('.bangunan_foto')\r\n                            .css({\"color\": \"peru\", \"border\": \"2px solid blue\"}).val(data.filename);\r\n                        fileinput.parent().parent().parent().find('img._foto').attr('src','/files/foto/bangunan/'+data.filename);\r\n                    }\r\n                },\r\n                error: errorHandler = function() {\r\n                    alert(\"Something went wrong!\");\r\n                },\r\n            });\r\n        }\r\n    });\r\n}(jQuery, window, document));\r\n\r\n//Table\r\n(function($, window, document){\r\n    $.extend( $.fn.dataTable.defaults, {\r\n        autoWidth: false,\r\n        pagingType: 'full_numbers',\r\n        dom: '<\"datatable-header\"fl><\"datatable-scroll\"t><\"datatable-footer\"ip>',\r\n        language: {\r\n            \"decimal\":        \"\",\r\n            \"emptyTable\":     \"Tidak ada data\",\r\n            \"info\":           \"Menampilkan _START_ sampai _END_ dari _TOTAL_ data\",\r\n            \"infoEmpty\":      \"Menampilkan 0 sampai 0 dari 0 data\",\r\n            \"infoFiltered\":   \"(dari _MAX_ total data)\",\r\n            \"infoPostFix\":    \"\",\r\n            \"thousands\":      \",\",\r\n            \"lengthMenu\":     \"Data _MENU_ \",\r\n            \"loadingRecords\": \"Tunggu Sebentar...\",\r\n            \"processing\":     \"Proses...\",\r\n            \"search\":         \"Cari:\",\r\n            \"zeroRecords\":    \"Tidak ada data yang dicari..\",\r\n            \"paginate\": {\r\n                \"first\":      \"<<\",\r\n                \"last\":       \">>\",\r\n                \"next\":       \">\",\r\n                \"previous\":   \"<\"\r\n            },\r\n            \"aria\": {\r\n                \"sortAscending\":  \": activate to sort column ascending\",\r\n                \"sortDescending\": \": activate to sort column descending\"\r\n            }\r\n        \r\n        }\r\n\r\n    });\r\n\r\n    var table_jenislampu = $('#table_jenislampu').DataTable({\r\n        \"ajax\": \"/kategori/jenislampu/array\",\r\n        \"columns\": [\r\n            {\r\n                \"className\":      'details-control',\r\n                \"orderable\":      false,\r\n                \"data\":           null,\r\n                \"defaultContent\": ''\r\n            },\r\n            { \"data\": \"id\" },\r\n            { \"data\": \"jenis_lampu\" },\r\n            \r\n        ],\r\n        'sDom': 'lt<pi>',\r\n\r\n    });\r\n\r\n    var table_kinformasi = $('#table_kinformasi').DataTable({\r\n        \"ajax\": \"/kategori/informasi/array\",\r\n        \"columns\": [\r\n            {\r\n                \"className\":      'details-control',\r\n                \"orderable\":      false,\r\n                \"data\":           null,\r\n                \"defaultContent\": ''\r\n            },\r\n            { \"data\": \"id\" },\r\n            { \"data\": \"nama_kategori\" },\r\n            \r\n        ],\r\n        'sDom': 'lt<pi>' \r\n    });\r\n    $('.box').on('click','.cari_category',function(e){\r\n        $('#formPjuSearch').modal('show');\r\n    })\r\n    var menu_list_pju = '';\r\n    if (hasRole('edit.pju')) {\r\n        menu_list_pju += '<li><a href=\"#\" class=\"edit\">Edit</a></li>';\r\n    }\r\n    if (hasRole('delete.pju')) {\r\n        menu_list_pju += '<li><a href=\"#\" class=\"hapus\">Hapus</a></li>';\r\n    }\r\n    menu_list_pju += '<li><a href=\"#\" class=\"lihat\">Lihat</a></li>';\r\n    var table_pju = $('#table_pju').DataTable({\r\n        processing: true,\r\n        serverSide: false,\r\n        ajax: {\r\n            url:'/pju/array',\r\n            type:'get',\r\n\r\n        },\r\n        //\"ajax\": \"/pju/array\",\r\n        \"columns\": [\r\n            {\r\n                //\"className\":      'details-control',\r\n                \"orderable\":      false,\r\n                \"data\":           null,\r\n                \"defaultContent\":   \r\n                    '<div class=\"input-group margin\">' +\r\n                        '<div class=\"input-group-btn\">' +\r\n                            '<button type=\"button\" class=\"btn btn-default btn-xs dropdown-toggle\" data-toggle=\"dropdown\">' +\r\n                            '<span class=\"fa fa-caret-down\"></span></button>' +\r\n                            '<ul class=\"dropdown-menu\">' +\r\n                                menu_list_pju +\r\n                            '</ul>' +\r\n                        '</div>' +\r\n                    '</div>' \r\n                ,\r\n            },\r\n            { \"data\": \"nama_kecamatan\" },\r\n            { \"data\": \"nama_kelurahan\" },\r\n            { \"data\": \"nama_jalan\" },\r\n            { \"data\": \"status_jalan\" },\r\n            { \"data\": \"tipe_pju\" },\r\n            { \"data\": \"lengan_pju\" },\r\n            { \"data\": \"tiang_pju\" },\r\n            { \"data\": \"jenis_lampu\" },\r\n            { \"data\": \"tahun\" },\r\n            { \"data\": \"kondisi_pju\" },\r\n            \r\n        ],\r\n        \"columnDefs\": [\r\n            {\r\n                \"targets\": 0,\r\n                \"orderable\": false,\r\n            },\r\n        ],\r\n        \"order\": [[1, 'asc']],\r\n        responsive: true,\r\n        initComplete: function () {\r\n            \r\n            this.api().columns().every( function (colIndex,e) {\r\n                var column = this;\r\n                var kec_filter = $(\"#kecamatan_filter\");\r\n                var kel_filter = $(\"#kelurahan_filter\");\r\n                if (colIndex == 0) {\r\n                    \r\n                }else if(colIndex == 1){\r\n                    \r\n                    var select = $(\"#kecamatan_filter\")\r\n                        .on( 'change', function (e) {\r\n                            var id = $(this).val();\r\n                            if (id != \"\") {\r\n                            var kecamatan_json = getjson('/getKecamatanID/'+id);                       \r\n                            var val = $.fn.DataTable.util.escapeRegex(kecamatan_json.nama_kecamatan);\r\n                            column.search(val).draw();\r\n                            \r\n                            var options = '<option value=\"\">Pilih Kelurahan..</option>';\r\n                            var data_kelurahan = getjson('/getDesa/'+kecamatan_json.kode_kec);\r\n                            for (var x = 0; x < data_kelurahan.length; x++) {\r\n                                options += '<option value=\"' + data_kelurahan[x]['kode_kel'] + '\">' + data_kelurahan[x]['nama_kelurahan'] + '</option>';\r\n                            }\r\n                            kel_filter.html(options);\r\n                            }else{\r\n                                column.search(\"\").draw();\r\n                            }\r\n                        } );\r\n\r\n                        var options = '<option value=\"\">Pilih Kecamatan..</option>';\r\n                        var data_kecamatan = getjson('/getKecamatan');\r\n                        for (var x = 0; x < data_kecamatan.length; x++) {\r\n                            options += '<option value=\"' + data_kecamatan[x]['kode_kec'] + '\">' + data_kecamatan[x]['nama_kecamatan'] + '</option>';\r\n                        }\r\n                        kec_filter.html(options);\r\n                        \r\n                }else if(colIndex == 2){\r\n                    kel_filter.on( 'change', function (e) {\r\n                        var id = $(this).val();\r\n                        if (id != \"\") {\r\n                            var kelurahan_json = getjson('/getDesaID/'+id);                       \r\n                            var val_kelurahan = $.fn.DataTable.util.escapeRegex(kelurahan_json.nama_kelurahan);\r\n                            column.search(val_kelurahan).draw();\r\n                        }else{\r\n                            column.search(\"\").draw();\r\n                        }\r\n                    });\r\n                }else if(colIndex == 3){\r\n                    var select = $('#namajalan_filter')\r\n                        .on( 'change', function () {\r\n                            var val = $.fn.DataTable.util.escapeRegex($(this).val());\r\n                            column.search( val ? '^'+val+'$' : '', true, true ).draw();\r\n                        } );\r\n                        column.data().unique().sort().each( function ( d, j ) {\r\n                            if(column.search() === '^'+d+'$'){\r\n                                select.append( '<option value=\"'+d+'\" selected=\"selected\">'+d+'</option>' )\r\n                            } else {\r\n                                select.append( '<option value=\"'+d+'\">'+d+'</option>' )\r\n                            }\r\n                        } );\r\n                }else if(colIndex == 4){\r\n                    var select = $('#statusjalan_filter')\r\n                        .on( 'change', function () {\r\n                            var val = $.fn.DataTable.util.escapeRegex($(this).val());\r\n                            column.search( val ? '^'+val+'$' : '', true, true ).draw();\r\n                        } );\r\n                        column.data().unique().sort().each( function ( d, j ) {\r\n                            if(column.search() === '^'+d+'$'){\r\n                                select.append( '<option value=\"'+d+'\" selected=\"selected\">'+d+'</option>' )\r\n                            } else {\r\n                                select.append( '<option value=\"'+d+'\">'+d+'</option>' )\r\n                            }\r\n                        } );\r\n                }else if(colIndex == 5){\r\n                    var select = $('#tipepju_filter')\r\n                        .on( 'change', function () {\r\n                            var val = $.fn.DataTable.util.escapeRegex($(this).val());\r\n                            column.search( val ? '^'+val+'$' : '', true, true ).draw();\r\n                        } );\r\n                        column.data().unique().sort().each( function ( d, j ) {\r\n                            if(column.search() === '^'+d+'$'){\r\n                                select.append( '<option value=\"'+d+'\" selected=\"selected\">'+d+'</option>' )\r\n                            } else {\r\n                                select.append( '<option value=\"'+d+'\">'+d+'</option>' )\r\n                            }\r\n                        } );\r\n                }else if(colIndex == 6){\r\n                    var select = $('#jenislengan_filter')\r\n                        .on( 'change', function () {\r\n                            var val = $.fn.DataTable.util.escapeRegex($(this).val());\r\n                            column.search( val ? '^'+val+'$' : '', true, true ).draw();\r\n                        } );\r\n                        column.data().unique().sort().each( function ( d, j ) {\r\n                            if(column.search() === '^'+d+'$'){\r\n                                select.append( '<option value=\"'+d+'\" selected=\"selected\">'+d+'</option>' )\r\n                            } else {\r\n                                select.append( '<option value=\"'+d+'\">'+d+'</option>' )\r\n                            }\r\n                        } );\r\n                }else if(colIndex == 7){\r\n                    var select = $('#jenistiang_filter')\r\n                        .on( 'change', function () {\r\n                            var val = $.fn.DataTable.util.escapeRegex($(this).val());\r\n                            column.search( val ? '^'+val+'$' : '', true, true ).draw();\r\n                        } );\r\n                        column.data().unique().sort().each( function ( d, j ) {\r\n                            if(column.search() === '^'+d+'$'){\r\n                                select.append( '<option value=\"'+d+'\" selected=\"selected\">'+d+'</option>' )\r\n                            } else {\r\n                                select.append( '<option value=\"'+d+'\">'+d+'</option>' )\r\n                            }\r\n                        } );\r\n                }else if(colIndex == 8){\r\n                    var select = $('#jenislampu_filter')\r\n                        .on( 'change', function () {\r\n                            var val = $.fn.DataTable.util.escapeRegex($(this).val());\r\n                            column.search( val ? '^'+val+'$' : '', true, true ).draw();\r\n                        } );\r\n                        column.data().unique().sort().each( function ( d, j ) {\r\n                            if(column.search() === '^'+d+'$'){\r\n                                select.append( '<option value=\"'+d+'\" selected=\"selected\">'+d+'</option>' )\r\n                            } else {\r\n                                select.append( '<option value=\"'+d+'\">'+d+'</option>' )\r\n                            }\r\n                        } );\r\n                }else if(colIndex == 9){\r\n                    \r\n                }else if(colIndex == 10){\r\n                    var select = $('#kondisi_filter')\r\n                        .on( 'change', function () {\r\n                            var val = $.fn.DataTable.util.escapeRegex($(this).val());\r\n                            column.search( val ? '^'+val+'$' : '', true, true ).draw();\r\n                        } );\r\n                        column.data().unique().sort().each( function ( d, j ) {\r\n                            if(column.search() === '^'+d+'$'){\r\n                                select.append( '<option value=\"'+d+'\" selected=\"selected\">'+d+'</option>' )\r\n                            } else {\r\n                                select.append( '<option value=\"'+d+'\">'+d+'</option>' )\r\n                            }\r\n                        } );\r\n                }\r\n            } );\r\n            \r\n        },\r\n        \"footerCallback\": function(tfoot, data, start, end, length , display ) {\r\n            //console.log(\"Data\",table_pju.page.info());\r\n            \r\n        },\r\n        \"drawCallback\": function( settings ) {\r\n            var api = this.api();\r\n     \r\n            // Output the data for the visible rows to the browser's console\r\n            //console.log( api.rows().data() );\r\n        },\r\n        //'sDom': 'lt<pi>'\r\n        \r\n    });\r\n\r\n    var table_user = $('#table_user').DataTable();\r\n    \r\n\r\n   \r\n                \r\n                \r\n                \r\n      \r\n    \r\n    \r\n    $('#table_pju tbody').on('click', 'a',function(e) {\r\n        var data =  table_pju.row($(this).parents('tr')).data();\r\n        var idpju = data.id;\r\n        //console.log(data);\r\n        if ($(this).hasClass('edit')) {\r\n            document.location ='/pju/'+data.id+'/edit';\r\n        }else if ($(this).hasClass('lihat')) {\r\n            document.location ='/pju/'+data.id+'/lihat';\r\n        }else if($(this).hasClass('hapus')){\r\n            e.preventDefault();\r\n            \r\n            var el = $(this).parent();\r\n            var title = el.attr('data-title');\r\n            var msg = el.attr('data-message');\r\n            var dataForm = el.attr('data-form');\r\n           \r\n            var newForm = jQuery('<form>', {\r\n                'action': '/pju/'+idpju+'/delete',\r\n                'target': '_top',\r\n                'method' : 'post',\r\n            }).append(jQuery('<input>', {\r\n                'name': '_method',\r\n                'value': 'DELETE',\r\n                'type': 'hidden'\r\n            })).append($('<input />',{\r\n                'name': '_token',\r\n                'value': $('meta[name=\"_token\"]').attr('content'),\r\n                'type': 'hidden'\r\n            }));\r\n\r\n            $('#formConfirm')\r\n            .find('#frm_body').html('<h6>'+msg+'</h6>').append(newForm)\r\n            .end().find('#frm_title').html(title)\r\n            .end().modal('show');\r\n            \r\n            $('#formConfirm').find('#frm_submit').attr('data-form', dataForm);\r\n\r\n            \r\n            $('#formConfirm').on('click', '#frm_submit', function(e) {\r\n                //var id = $(this).attr('data-form');\r\n                //console.log(newForm);\r\n                newForm.submit();\r\n                //$(id).submit();\r\n            });\r\n        }\r\n        table_pju.draw();\r\n    });\r\n    var menu_list_lpm = '';\r\n    menu_list_lpm += '<li><a href=\"#\" class=\"lihatgambar\">Lihat Gambar</a></li>';\r\n    if (hasRole('delete.lpm')) {\r\n        menu_list_lpm += '<li><a href=\"#\" class=\"hapus\">Hapus</a></li>';\r\n    }\r\n\r\n    var table_lpm = $('#table_lpm').DataTable({\r\n        processing: true,\r\n        serverSide: false,\r\n        ajax: {\r\n            url:'/lpm/array',\r\n            type:'get',\r\n\r\n        },\r\n        \r\n        \"columns\": [\r\n            {\r\n                \"className\":      'details-control',\r\n                \"orderable\":      false,\r\n                //\"data\":           null,\r\n                \"defaultContent\":   \r\n                    '<div class=\"input-group margin\">' +\r\n                        '<div class=\"input-group-btn\">' +\r\n                            '<button type=\"button\" class=\"btn btn-default btn-xs dropdown-toggle\" data-toggle=\"dropdown\">' +\r\n                            '<span class=\"fa fa-caret-down\"></span></button>' +\r\n                            '<ul class=\"dropdown-menu\">' +\r\n                                menu_list_lpm +\r\n                            '</ul>' +\r\n                        '</div>' +\r\n                    '</div>' \r\n                ,\r\n                \r\n            },\r\n            { \"data\": \"pelapor\" },\r\n            { \"data\": \"waktu\" },\r\n            { \"data\": \"status\" },\r\n            { \"data\": \"keterangan\" },\r\n            { \"data\": \"posisi\" },\r\n            \r\n        ],\r\n        \"columnDefs\": [\r\n            {\r\n                \"targets\": 0,\r\n                \"orderable\": false,\r\n            },\r\n        ],\r\n        \"order\": [[1, 'asc']],\r\n        responsive: true,\r\n\r\n        //'sDom': 'lt<pi>'\r\n        \r\n    });\r\n    $('#table_lpm tbody').on('click', 'a',function(e) {\r\n        var data =  table_lpm.row($(this).parents('tr')).data();\r\n        var idlpm = data.id;\r\n        \r\n        if ($(this).hasClass('lihatgambar')) {\r\n            $('#lpmModal')\r\n            .find('#frm_body').html('<div class=\"row\"><div class=\"col-md-12\"><img class=\"img-rounded\" src=\"/files/'+data.gambar+'\" width=\"100%\"/></div></div>')\r\n            .end().find('#frm_title').html(data)\r\n            .end().modal('show');\r\n        }else if($(this).hasClass('hapus')){\r\n            e.preventDefault();\r\n            \r\n            var el = $(this).parent();\r\n            var title = el.attr('data-title');\r\n            var msg = el.attr('data-message');\r\n            var dataForm = el.attr('data-form');\r\n           \r\n            var newForm = jQuery('<form>', {\r\n                'action': '/lpm/'+idlpm+'/delete',\r\n                'target': '_top',\r\n                'method' : 'post',\r\n            }).append(jQuery('<input>', {\r\n                'name': '_method',\r\n                'value': 'DELETE',\r\n                'type': 'hidden'\r\n            })).append($('<input />',{\r\n                'name': '_token',\r\n                'value': $('meta[name=\"_token\"]').attr('content'),\r\n                'type': 'hidden'\r\n            }));\r\n\r\n            $('#formConfirm')\r\n            .find('#frm_body').html('<h6>'+msg+'</h6>').append(newForm)\r\n            .end().find('#frm_title').html(title)\r\n            .end().modal('show');\r\n            \r\n            $('#formConfirm').find('#frm_submit').attr('data-form', dataForm);\r\n            $('#formConfirm').on('click', '#frm_submit', function(e) {\r\n                //var id = $(this).attr('data-form');\r\n                //console.log(newForm);\r\n                newForm.submit();\r\n                //$(id).submit();\r\n            });\r\n        }\r\n    });\r\n    //var info = table_pju.page.info();\r\n    var menu_list_kwh = '';\r\n    if (hasRole('edit.kwh')) {\r\n        \r\n        menu_list_kwh += '<li><a href=\"#\" class=\"edit\">Edit</a></li>';\r\n    }\r\n    if (hasRole('delete.kwh')) {\r\n        menu_list_kwh += '<li><a href=\"#\" class=\"hapus\">Hapus</a></li>';\r\n    }\r\n    var table_kwh = $('#table_kwh').DataTable({\r\n        \"ajax\": \"/kwh/array\",\r\n        \"columns\": [\r\n            {\r\n                //\"className\":      'details-control',\r\n                \"orderable\":      false,\r\n                \"data\":           null,\r\n                \"defaultContent\":   /*'<a class=\"btn btn-sm btn-flat edit btn-primary\">Edit</a>'+\r\n                                    '<a class=\"btn btn-sm btn-flat btn-primary hapus\">Hapus</a>'*/\r\n                    \r\n\r\n                    '<div class=\"input-group margin\">' +\r\n                        '<div class=\"input-group-btn\">' +\r\n                            '<button type=\"button\" class=\"btn btn-default btn-xs dropdown-toggle\" data-toggle=\"dropdown\">' +\r\n                            '<span class=\"fa fa-caret-down\"></span></button>' +\r\n                            '<ul class=\"dropdown-menu\">' +\r\n                                menu_list_kwh +\r\n                            '</ul>' +\r\n                        '</div>' +\r\n                    '</div>' \r\n                ,\r\n            },\r\n            { \"data\": \"nama_pju\" },\r\n            { \"data\": \"alamat\" },\r\n            { \"data\": \"nama_kecamatan\" },\r\n            { \"data\": \"nama_kelurahan\" },\r\n            { \"data\": \"nama_gardu\" },\r\n            { \"data\": \"tarif\" },\r\n            { \"data\": \"daya\" },\r\n            { \"data\": \"tgl_cabut_pasang\" },\r\n        ],\r\n        \"order\": [[1, 'asc']],\r\n        responsive: true,\r\n    });\r\n    $('#table_kwh tbody').on('click', 'a',function(e) {\r\n        var data =  table_kwh.row($(this).parents('tr')).data();\r\n        var idkwh = data.id;\r\n        //console.log(data);\r\n        if ($(this).hasClass('edit')) {\r\n            document.location ='/kwh/'+data.id+'/edit';\r\n        }else if($(this).hasClass('hapus')){\r\n            e.preventDefault();\r\n            \r\n            var el = $(this).parent();\r\n            var title = el.attr('data-title');\r\n            var msg = el.attr('data-message');\r\n            var dataForm = el.attr('data-form');\r\n           \r\n            var newForm = jQuery('<form>', {\r\n                'action': '/kwh/'+idkwh+'/delete',\r\n                'target': '_top',\r\n                'method' : 'post',\r\n            }).append(jQuery('<input>', {\r\n                'name': '_method',\r\n                'value': 'DELETE',\r\n                'type': 'hidden'\r\n            })).append($('<input />',{\r\n                'name': '_token',\r\n                'value': $('meta[name=\"_token\"]').attr('content'),\r\n                'type': 'hidden'\r\n            }));\r\n\r\n            $('#formConfirm')\r\n            .find('#frm_body').html('<h6>'+msg+'</h6>').append(newForm)\r\n            .end().find('#frm_title').html(title)\r\n            .end().modal('show');\r\n            \r\n            $('#formConfirm').find('#frm_submit').attr('data-form', dataForm);\r\n            $('#formConfirm').on('click', '#frm_submit', function(e) {\r\n                newForm.submit();\r\n            });\r\n        }\r\n        \r\n        table_pju.draw();\r\n    });\r\n\r\n    $('.box').on('click','.cari_category_pengawasan',function(e){\r\n        $('#formPengawasanSearch').modal('show');\r\n    });\r\n    var menu_list_pengawsan = '';\r\n    console.log(hasRole('edit.pengawasan'));\r\n    if (hasRole('edit.pengawasan')) {\r\n        menu_list_pengawsan += '<li><a href=\"#\" class=\"update\">Update</a></li>';\r\n    }\r\n    menu_list_pengawsan += '<li><a href=\"#\" class=\"detail\">Detail</a></li>';\r\n    \r\n    var table_pengawasan = $('#table_pengawasan').DataTable({\r\n        \"ajax\": \"/pengawasan/array\",\r\n        \"columns\": [\r\n            {\r\n                //\"className\":      'details-control',\r\n                \"orderable\":      false,\r\n                \"data\":           null,\r\n                \"defaultContent\":  \r\n                    '<div class=\"input-group margin\">' +\r\n                        '<div class=\"input-group-btn\">' +\r\n                            '<button type=\"button\" class=\"btn btn-default btn-xs dropdown-toggle\" data-toggle=\"dropdown\">' +\r\n                            '<span class=\"fa fa-caret-down\"></span></button>' +\r\n                            '<ul class=\"dropdown-menu\">' +\r\n                                menu_list_pengawsan +\r\n                            '</ul>' +\r\n                        '</div>' +\r\n                    '</div>' \r\n                ,\r\n            },\r\n            { \"data\": \"nama_kecamatan\" },\r\n            { \"data\": \"nama_kelurahan\" },\r\n            { \"data\": \"nama_jalan\" },\r\n            { \"data\": \"status_jalan\" },\r\n            { \"data\": \"kondisi_pju\" },\r\n            { \"data\": \"keterangan\" },\r\n            { \"data\": \"sumber_info\" },\r\n        ],\r\n        \"order\": [[1, 'asc']],\r\n        responsive: true,\r\n        initComplete: function () {\r\n            \r\n            this.api().columns().every( function (colIndex,e) {\r\n                var column = this;\r\n                var kec_filter = $(\"#kecamatan_filter_pengawasan\");\r\n                var kel_filter = $(\"#kelurahan_filter_pengawasan\");\r\n                if (colIndex == 0) {\r\n                }else if(colIndex == 1){\r\n                    \r\n                    kec_filter\r\n                        .on( 'change', function (e) {\r\n                            var id = $(this).val();\r\n                            if (id != \"\") {\r\n                            var kecamatan_json = getjson('/getKecamatanID/'+id);                       \r\n                            var val = $.fn.DataTable.util.escapeRegex(kecamatan_json.nama_kecamatan);\r\n                            column.search(val).draw();\r\n                            \r\n                            var options = '<option value=\"\">Pilih Kelurahan..</option>';\r\n                            var data_kelurahan = getjson('/getDesa/'+kecamatan_json.kode_kec);\r\n                            for (var x = 0; x < data_kelurahan.length; x++) {\r\n                                options += '<option value=\"' + data_kelurahan[x]['kode_kel'] + '\">' + data_kelurahan[x]['nama_kelurahan'] + '</option>';\r\n                            }\r\n                            kel_filter.html(options);\r\n                            }else{\r\n                                column.search(\"\").draw();\r\n                            }\r\n                        } );\r\n\r\n                        var options = '<option value=\"\">Pilih Kecamatan..</option>';\r\n                        var data_kecamatan = getjson('/getKecamatan');\r\n                        for (var x = 0; x < data_kecamatan.length; x++) {\r\n                            options += '<option value=\"' + data_kecamatan[x]['kode_kec'] + '\">' + data_kecamatan[x]['nama_kecamatan'] + '</option>';\r\n                        }\r\n                        kec_filter.html(options);\r\n                }else if(colIndex == 2){\r\n                    kel_filter.on( 'change', function (e) {\r\n                        var id = $(this).val();\r\n                        if (id != \"\") {\r\n                            var kelurahan_json = getjson('/getDesaID/'+id);                       \r\n                            var val_kelurahan = $.fn.DataTable.util.escapeRegex(kelurahan_json.nama_kelurahan);\r\n                            column.search(val_kelurahan).draw();\r\n                        }else{\r\n                            column.search(\"\").draw();\r\n                        }\r\n                    });\r\n                }else if(colIndex == 3){\r\n                    var select = $('#namajalan_filter_pengawasan')\r\n                        .on( 'change', function () {\r\n                            var val = $.fn.DataTable.util.escapeRegex($(this).val());\r\n                            column.search( val ? '^'+val+'$' : '', true, true ).draw();\r\n                        } );\r\n                        column.data().unique().sort().each( function ( d, j ) {\r\n                            if(column.search() === '^'+d+'$'){\r\n                                select.append( '<option value=\"'+d+'\" selected=\"selected\">'+d+'</option>' )\r\n                            } else {\r\n                                select.append( '<option value=\"'+d+'\">'+d+'</option>' )\r\n                            }\r\n                        } );\r\n                }else if(colIndex == 5){\r\n                    var select = $('#kondisi_filter_pengawasan')\r\n                        .on( 'change', function () {\r\n                            var val = $.fn.DataTable.util.escapeRegex($(this).val());\r\n                            column.search( val ? '^'+val+'$' : '', true, true ).draw();\r\n                        } );\r\n                        column.data().unique().sort().each( function ( d, j ) {\r\n                            if(column.search() === '^'+d+'$'){\r\n                                select.append( '<option value=\"'+d+'\" selected=\"selected\">'+d+'</option>' )\r\n                            } else {\r\n                                select.append( '<option value=\"'+d+'\">'+d+'</option>' )\r\n                            }\r\n                        } );\r\n                }\r\n            } );\r\n            \r\n        },\r\n    });\r\n\r\n    $('#table_pengawasan tbody').on('click','a',function(e) {\r\n        var data =  table_pengawasan.row($(this).parents('tr')).data();\r\n        var idpju = data.id;\r\n        //console.log(data);\r\n        if ($(this).hasClass('update')) {\r\n            document.location ='/pengawasan/'+idpju+'/edit';\r\n        }else if($(this).hasClass('detail')){\r\n            e.preventDefault();\r\n            document.location ='/pengawasan/'+idpju+'/lihat';\r\n        }\r\n    });\r\n\r\n    var table_hpengawasan = $('#table_hpengawasan').DataTable({\r\n        \"ajax\": \"/pengawasan/hp_array\",\r\n        \"columns\": [\r\n            {\r\n                //\"className\":      'details-control',\r\n                \"orderable\":      false,\r\n                \"data\":           null,\r\n                \"defaultContent\":  \r\n                    '<div class=\"input-group margin\">' +\r\n                        '<div class=\"input-group-btn\">' +\r\n                            '<button type=\"button\" class=\"btn btn-default btn-sm dropdown-toggle\" data-toggle=\"dropdown\">' +\r\n                            '<span class=\"fa fa-caret-down\"></span></button>' +\r\n                            '<ul class=\"dropdown-menu\">' +\r\n                                '<li><a href=\"#\" class=\"edit\">Edit</a></li>' +\r\n                                '<li><a href=\"#\" class=\"hapus\">Hapus</a></li>' +\r\n                            '</ul>' +\r\n                        '</div>' +\r\n                    '</div>' \r\n                ,\r\n            },\r\n            { \"data\": \"nama_kecamatan\" },\r\n            { \"data\": \"nama_kelurahan\" },\r\n            { \"data\": \"nama_jalan\" },\r\n            { \"data\": \"status_jalan\" },\r\n            { \"data\": \"kondisi_pju\" },\r\n            { \"data\": \"keterangan\" },\r\n            { \"data\": \"sumber_info\" },\r\n            { \"data\": \"tgl_pemeliharaan\" },\r\n            { \"data\": \"tahun_pemeliharaan\" },\r\n            { \"data\": \"status_kondisi\" },\r\n        ],\r\n        \"order\": [[1, 'asc']],\r\n    });\r\n\r\n    var table_role = $('#table_role').DataTable();\r\n    \r\n}(jQuery, window, document));\r\n\r\n//Form\r\n(function($, window, document){\r\n    $('.datepicker').datepicker({\r\n        autoclose: true,\r\n        format:'yyyy-mm-dd',\r\n        startDate:'-3d'\r\n    });\r\n    $('input.numberonly').bind('keypress', function(e) {\r\n        return numeralsOnly(e);\r\n    });\r\n    $('input.letteronly').bind('keypress', function(e) {\r\n        return lettersOnly(e);\r\n    });\r\n    var checkall = 'th.check-all';\r\n    $(checkall).on('change', function() {\r\n        var $this = $(this),\r\n            index= $this.index() + 1,\r\n            checkbox = $this.find('input[type=\"checkbox\"]'),\r\n            table = $this.parents('table');\r\n        // Make sure to affect only the correct checkbox column\r\n        table.find('tbody > tr > td:nth-child('+index+') input[type=\"checkbox\"]')\r\n          .prop('checked', checkbox[0].checked);\r\n    });\r\n\r\n    var provinsi = $('select#provinsi');\r\n    var kabkota = $('select#kabkota');\r\n    var kecamatan = $('select#kecamatan');\r\n    var desa = $('select#desa');\r\n    $('.loader').hide();\r\n    /*provinsi.select2(); \r\n    //$('select#kabkota').html(\"<option value=''>Pilih Kota..</option>\"); \r\n    //$('select#kabkota').select2();\r\n    \r\n    $('select#provinsi').on('change', function (){\r\n        $('select#kabkota').html(\"<option value=''>Pilih Kota..</option>\");// add this on each call then add the options when data receives from the request\r\n        $.ajax({\r\n            url: '/getKabKota/'+$(this).val(),\r\n            dataType: \"json\",\r\n            beforeSend: function() {\r\n                $('.loader').show();\r\n            },\r\n            success: function(data) {\r\n                $('select#kabkota').empty(); \r\n            \r\n                var options = '<option value=\"0\">Pilih Kota..</option>';\r\n                for (var x = 0; x < data.length; x++) {\r\n                    options += '<option value=\"' + data[x]['kode_kabupaten'] + '\">' + data[x]['kabupaten'] + '</option>';    \r\n                }\r\n                $('select#kabkota').select2();\r\n                $('select#kabkota').html(options);\r\n                $(\"#kabkota\").trigger(\"chosen:updated\");\r\n            },\r\n            complete: function() {\r\n                $('.loader').hide();\r\n            }\r\n        });\r\n    });\r\n    //$('select#kecamatan').html(\"<option value=''>Pilih Kecamatan..</option>\"); \r\n    //$('select#kecamatan').select2();\r\n    $('select#kabkota').on('change', function (){\r\n        $('select#kecamatan').html(\"<option value=''>Pilih Kecamatan..</option>\");// add this on each call then add the options when data receives from the request\r\n        \r\n        $.ajax({\r\n            url: '/getKecamatan/'+$(this).val(),\r\n            dataType: \"json\",\r\n            beforeSend: function() {\r\n                $('.loader').show();\r\n            },\r\n            success: function(data) {\r\n                $('select#kecamatan').empty(); \r\n            \r\n                var options = '<option value=\"0\">Pilih Kecamatan..</option>';\r\n                for (var x = 0; x < data.length; x++) {\r\n                    //console.log($('#jenis_usulan').val());\r\n                    if ($('#jenis_usulan').val() == 2 || $('#jenis_usulan').val() == 3) {\r\n                        if (data[x]['lokpri'] == 1) {\r\n                            options += '<option value=\"' + data[x]['kode_kecamatan'] + '\">' + data[x]['kecamatan'] + '</option>';        \r\n                        }\r\n                    }else{\r\n                        options += '<option value=\"' + data[x]['kode_kecamatan'] + '\">' + data[x]['kecamatan'] + '</option>';\r\n                    }\r\n                }\r\n                $('select#kecamatan').select2();\r\n                $('select#kecamatan').html(options);\r\n            },\r\n            complete: function() {\r\n                $('.loader').hide();\r\n            }\r\n        });\r\n    });*/\r\n\r\n    //Load data Kecamatan\r\n    $.ajax({\r\n        url: '/getKecamatan',\r\n        dataType: \"json\",\r\n        beforeSend: function() {\r\n            $('.loader').show();\r\n            $(\"#loader-wrapper\").show();\r\n        },\r\n        success: function(data) {\r\n            kecamatan.empty(); \r\n            var options = '<option value=\"0\">Pilih Kecamatan..</option>';\r\n            for (var x = 0; x < data.length; x++) {\r\n                var selected = (data[x]['kode_kec'] == $('#kode_kec').val()) ? \"selected\":\"\";\r\n                options += '<option value=\"' + data[x]['kode_kec'] + '\"'+ selected +'>' + data[x]['nama_kecamatan'] + '</option>';\r\n            }\r\n            kecamatan.html(options);\r\n            \r\n        },\r\n        complete: function() {\r\n            $('.loader').hide();\r\n            $(\"#loader-wrapper\").hide();\r\n        }\r\n    });\r\n    kecamatan.select2();\r\n\r\n    //$('select#desa').html(\"<option value=''>Pilih Desa..</option>\");\r\n    //$('select#desa').select2();\r\n    kecamatan.on('change', function (){\r\n        $('select#desa').html(\"<option value=''>Pilih Desa..</option>\");// add this on each call then add the options when data receives from the request\r\n        \r\n        $.ajax({\r\n            url: '/getDesa/'+$(this).val(),\r\n            dataType: \"json\",\r\n            beforeSend: function() {\r\n                $('.loader').show();\r\n                $(\"#loader-wrapper\").show();\r\n            },\r\n            success: function(data) {\r\n                $('select#desa').empty(); \r\n            \r\n                var options = '<option value=\"0\">Pilih Desa..</option>';\r\n                for (var x = 0; x < data.length; x++) {\r\n                   options += '<option value=\"' + data[x]['kode_kel'] + '\">' + data[x]['nama_kelurahan'] + '</option>';\r\n                }\r\n                $('select#desa').select2();\r\n                $('select#desa').html(options);\r\n            },\r\n            complete: function() {\r\n                $('.loader').hide();\r\n                $(\"#loader-wrapper\").hide();\r\n            }\r\n        });\r\n    });\r\n        if ($('#kode_kec').val() !== null) {\r\n            $.ajax({\r\n                url: '/getDesa/'+$('#kode_kec').val(),\r\n                dataType: \"json\",\r\n                beforeSend: function() {\r\n                    $('.loader').show();\r\n                },\r\n                success: function(data) {\r\n                    $('select#desa').empty(); \r\n                \r\n                    var options = '<option value=\"0\">Pilih Desa..</option>';\r\n                    for (var x = 0; x < data.length; x++) {\r\n                        var selected = (data[x]['kode_kel'] == $('#kode_kel').val()) ? \"selected\":\"\";\r\n                        options += '<option value=\"' + data[x]['kode_kel'] + '\" '+selected+'>' + data[x]['nama_kelurahan'] + '</option>';\r\n                    }\r\n                    $('select#desa').select2();\r\n                    $('select#desa').html(options);\r\n                },\r\n                complete: function() {\r\n                    $('.loader').hide();\r\n                }\r\n            });\r\n        } \r\n\r\n    $('#checkmap').click(function(){\r\n        if (navigator.geolocation) {\r\n            navigator.geolocation.getCurrentPosition(function(position) {\r\n            var pos = {\r\n                lat: position.coords.latitude,\r\n                lng: position.coords.longitude\r\n            };\r\n            $('input[name=latitude]').val(position.coords.latitude);\r\n            $('input[name=longitude]').val(position.coords.longitude);\r\n          }, function() {\r\n            \r\n          });\r\n        } else {\r\n          // Browser doesn't support Geolocation\r\n          alert('Browser anda tidak mendukung Geolocation');\r\n         \r\n        }        \r\n    });\r\n\r\n    if ($(\".tinymce_sismiop\").length > 0) {\r\n        tinymce.init({\r\n            selector: \".tinymce_sismiop\",\r\n            theme: \"modern\",\r\n                        //skin: \"light\",\r\n            //width: 600,\r\n            //height: 200,    \r\n            /*plugins: [\r\n                \"advlist autolink link image lists charmap print preview hr anchor pagebreak\",\r\n                \"searchreplace wordcount visualblocks visualchars insertdatetime media nonbreaking spellchecker\",\r\n                \"table contextmenu directionality emoticons paste textcolor responsivefilemanager code \"\r\n            ],*/\r\n            plugins: [\r\n                \"advlist autolink link image lists charmap print preview hr anchor pagebreak\",\r\n                \"searchreplace wordcount media nonbreaking spellchecker\",\r\n                \"table contextmenu directionality emoticons paste textcolor responsivefilemanager code \"\r\n            ],\r\n            relative_urls: false,\r\n            browser_spellcheck : true ,\r\n            filemanager_title:\"Responsive Filemanager\",\r\n            external_filemanager_path:\"http://\"+window.location.hostname+\":\"+window.location.port+\"/filemanager/\",\r\n            external_plugins: { \"filemanager\" : \"../../../filemanager/plugin.min.js\"},\r\n            codemirror: {\r\n                indentOnInit: true, // Whether or not to indent code on init. \r\n                path: 'CodeMirror'\r\n            },  \r\n            image_advtab: true,\r\n            toolbar1: \"undo redo | bold italic underline | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | styleselect\",\r\n            toolbar2: \"| responsivefilemanager | image | media | link unlink anchor | print preview code  | youtube | qrcode | flickr | picasa | easyColorPicker\"\r\n        });    \r\n    }\r\n\r\n    \r\n}(jQuery, window, document));\r\n\r\n"]}