{"version":3,"sources":["sismiop.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"sismiop.js","sourcesContent":["$.ajaxSetup({\r\n    headers: { 'X-CSRF-TOKEN': $('meta[name=\"_token\"]').attr('content') }\r\n});\r\n$.fn.rowCount = function() {\r\n    return $('tr', $(this).find('tbody')).length;\r\n};\r\nvar permission;\r\n$.extend({\r\n    getValues: function(url) {\r\n        var result = null;\r\n        $.ajax({\r\n            url: url,\r\n            type: 'get',\r\n            dataType: 'json',\r\n            async: false,\r\n            success: function(data) {\r\n                result = data;\r\n            }\r\n        });\r\n        return result;\r\n    }\r\n});\r\n\r\nfunction getjson(url){\r\n    var result = null;\r\n    $.ajax({\r\n        url: url,\r\n        type: 'get',\r\n        dataType: 'json',\r\n        async: false,\r\n        success: function(data) {\r\n            result = data;\r\n        }\r\n    });\r\n     return result;\r\n} \r\nfunction numeralsOnly(evt) {\r\n    evt = (evt) ? evt : event;\r\n    var charCode = (evt.charCode) ? evt.charCode : ((evt.keyCode) ? evt.keyCode :\r\n    ((evt.which) ? evt.which : 0));\r\n        if (charCode > 31 && (charCode < 48 || charCode > 57) && (charCode != 46)) {\r\n            alert(\"Hanya Nomor yang bisa di input pada kolom ini.\");\r\n            console.log(evt);\r\n            return false;\r\n        }\r\n    return true;\r\n}\r\nfunction lettersOnly(evt) {\r\n    evt = (evt) ? evt : event;\r\n    var charCode = (evt.charCode) ? evt.charCode : ((evt.keyCode) ? evt.keyCode :\r\n        ((evt.which) ? evt.which : 0));\r\n    if (charCode > 31 && (charCode < 65 || charCode > 90) && (charCode < 97 || charCode > 122)) {\r\n        alert(\"hanya huruf saja.\");\r\n        return false;\r\n    }\r\n    return true;\r\n}\r\nfunction ynOnly(evt) {\r\n    evt = (evt) ? evt : event;\r\n    var charCode = (evt.charCode) ? evt.charCode : ((evt.keyCode) ? evt.keyCode : ((evt.which) ? evt.which : 0));\r\n    if (charCode > 31 && charCode != 78 && charCode != 89 && charCode != 110 && charCode != 121) {\r\n    alert(\"Masukan hanya \\\"Y\\\" atau \\\"N\\\".\");\r\n\r\n    return false;\r\n    }\r\n    return true;\r\n}\r\nfunction rangeNumber(evt) {\r\n\r\n    evt = (evt) ? evt : event;\r\n    var charCode = (evt.charCode) ? evt.charCode : ((evt.keyCode) ? evt.keyCode :\r\n    ((evt.which) ? evt.which : 0));\r\n        if (charCode > 31 && (charCode < 48 || charCode > 57)) {\r\n            alert(\"Hanya Nomor yang bisa di input pada kolom ini.\");\r\n                $(this).val(0);\r\n            return false;\r\n        }\r\n        var max = 100;\r\n        var min = 0;\r\n        if ($(this).val() > max){\r\n             $(this).val(max);\r\n        }else if($(this).val() < min){\r\n             $(this).val(min);\r\n        }\r\n    return true;\r\n}\r\nfunction hasRole(name){\r\n    permission = getjson('/api/checkpermission');\r\n    var ret = null;\r\n    for(i in permission){\r\n        console.log(permission[i]);\r\n        if (permission[i] == name) {\r\n                return true;\r\n        }\r\n    }        \r\n}\r\nfunction base64image(resFile) {\r\n    var reader = new FileReader();\r\n    reader.readAsDataURL(resFile);\r\n    reader.onloadend = function(evt) {\r\n      return (evt.target.result);\r\n    }\r\n}\r\n(function($, window, document){\r\n    $(\"#loader-wrapper\").hide();\r\n}(jQuery, window, document));\r\n\r\n(function($, window, document){\r\n    $('.formConfirm').on('click', function(e) {\r\n        \r\n        e.preventDefault();\r\n        \r\n        if($(this).hasClass('disabled')) return;\r\n\r\n        var el = $(this).parent();\r\n        var title = el.attr('data-title');\r\n        var msg = el.attr('data-message');\r\n        var dataForm = el.attr('data-form');\r\n        \r\n        $('#formConfirm')\r\n        .find('#frm_body').html('<h6>'+msg+'</h6>')\r\n        .end().find('#frm_title').html(title)\r\n        .end().modal('show');\r\n        \r\n        $('#formConfirm').find('#frm_submit').attr('data-form', dataForm);\r\n    });\r\n\r\n    $('#formConfirm').on('click', '#frm_submit', function(e) {\r\n        var id = $(this).attr('data-form');\r\n        console.log(id);\r\n        $(id).submit();\r\n    });\r\n\r\n    \r\n}(jQuery, window, document));\r\n//Jam Online\r\n(function($, window, document){\r\n    if( $( '.rt-clock' ).length > 0 ){\r\n        var monthNames = [ 'Januari', 'Pebruari', 'Maret', 'April', 'Mei', 'Juni', 'Juli', 'Agustus', 'September', 'Oktober', 'Nopember', 'Desember' ];\r\n        var dayNames= [ 'Minggu', 'Senin', 'Selasa', 'Rabu', 'Kamis', 'Jum\\'at', 'Sabtu' ];\r\n\r\n        var newDate = new Date();\r\n\r\n        newDate.setDate(newDate.getDate());\r\n\r\n        var date = dayNames[ newDate.getDay() ] + ', ' + newDate.getDate() + ' ' + monthNames[ newDate.getMonth() ] + ' ' + newDate.getFullYear();\r\n\r\n        $( '.rt-clock .date' ).html( date );\r\n\r\n        setInterval(\r\n            function() {\r\n                var seconds = new Date().getSeconds();\r\n                $(\".rt-clock .seconds\").html(( seconds < 10 ? \"0\" : \"\" ) + seconds);\r\n            },1000 );\r\n\r\n        setInterval(\r\n            function() {\r\n                var minutes = new Date().getMinutes();\r\n                $(\".rt-clock .minutes\").html(( minutes < 10 ? \"0\" : \"\" ) + minutes);\r\n            },1000);\r\n\r\n        setInterval(\r\n            function() {\r\n                var hours = new Date().getHours();\r\n                $(\".rt-clock .hours\").html(( hours < 10 ? \"0\" : \"\" ) + hours);\r\n            }, 1000);\r\n    }\r\n}(jQuery, window, document));\r\n//Upload\r\n(function($, window, document){\r\n    var hasChanged = false;\r\n    $(window).bind('beforeunload', function(){\r\n      if(hasChanged){\r\n        return \"You have unsaved changes\";\r\n        hasChanged = false;\r\n      } \r\n    });\r\n    $('input[type=text]').change(function(){\r\n        hasChanged = true;\r\n    });\r\n   \r\n    $('.formUpload').on('click', function(e) {\r\n        var bangunan_file = $(this).closest('span').find('.bangunan_file');\r\n        \r\n        if (bangunan_file.length > 0) {\r\n            bangunan_file.trigger('click');\r\n        }\r\n    });\r\n    $('.fileupload:file').change(function(){\r\n        var fileinput = $(this);\r\n        var file = this.files[0];\r\n        name = file.name;\r\n        size = file.size;\r\n        type = file.type;\r\n        \r\n        if(file.name.length < 1) {\r\n        }else if(file.size > 209715200) {\r\n            alert(\"File Terlalu Besar, Maksimal 200 Mb\");\r\n        }else if(file.type != 'image/png' && file.type != 'image/jpg' && file.type != 'image/gif' && file.type != 'image/jpeg' && file.type != 'application/pdf' && file.type != 'application/vnd.openxmlformats-officedocument.wordprocessingml.document') {\r\n            alert(\"File tidak diijinkan untuk di upload\");\r\n            $(this).val('');\r\n        }else { \r\n            var formData = new FormData($('*formId*')[0]);\r\n            if(!!file.type.match(/.*/)){\r\n                formData.append(\"images\", file);\r\n            }\r\n                \r\n            $.ajax({\r\n                url: \"/kuesioner/bangunan/upload\",\r\n                type: \"POST\",\r\n                data: formData,\r\n                cache: false,\r\n                processData: false,\r\n                contentType: false,\r\n                dataType:'json',\r\n                beforeSend: function(){\r\n                    $(\"#loader-wrapper\").show();\r\n                },\r\n                complete: function(){   \r\n                    $(\"#loader-wrapper\").hide();\r\n                },\r\n                success: function(data){\r\n                    if($('.bangunan_foto').length > 0) {\r\n                        fileinput.closest('div.controlupload').find('.bangunan_foto')\r\n                            .css({\"color\": \"peru\", \"border\": \"2px solid blue\"}).val(data.filename);\r\n                        fileinput.parent().parent().parent().find('img._foto').attr('src','/files/foto/bangunan/'+data.filename);\r\n                    }\r\n                },\r\n                error: errorHandler = function() {\r\n                    alert(\"Something went wrong!\");\r\n                },\r\n            });\r\n        }\r\n    });\r\n}(jQuery, window, document));\r\n\r\n//Table\r\n(function($, window, document){\r\n    $.extend( $.fn.dataTable.defaults, {\r\n        autoWidth: false,\r\n        pagingType: 'full_numbers',\r\n        dom: '<\"datatable-header\"fl><\"datatable-scroll\"t><\"datatable-footer\"ip>',\r\n        language: {\r\n            \"decimal\":        \"\",\r\n            \"emptyTable\":     \"Tidak ada data\",\r\n            \"info\":           \"Menampilkan _START_ sampai _END_ dari _TOTAL_ data\",\r\n            \"infoEmpty\":      \"Menampilkan 0 sampai 0 dari 0 data\",\r\n            \"infoFiltered\":   \"(dari _MAX_ total data)\",\r\n            \"infoPostFix\":    \"\",\r\n            \"thousands\":      \",\",\r\n            \"lengthMenu\":     \"Data _MENU_ \",\r\n            \"loadingRecords\": \"Tunggu Sebentar...\",\r\n            \"processing\":     \"Proses...\",\r\n            \"search\":         \"Cari:\",\r\n            \"zeroRecords\":    \"Tidak ada data yang dicari..\",\r\n            \"paginate\": {\r\n                \"first\":      \"<<\",\r\n                \"last\":       \">>\",\r\n                \"next\":       \">\",\r\n                \"previous\":   \"<\"\r\n            },\r\n            \"aria\": {\r\n                \"sortAscending\":  \": activate to sort column ascending\",\r\n                \"sortDescending\": \": activate to sort column descending\"\r\n            }\r\n        \r\n        }\r\n\r\n    });\r\n\r\n    var table_user = $('#table_user').DataTable();\r\n    var table_role = $('#table_role').DataTable();\r\n    $('#table_layer').DataTable({\r\n        processing: true,\r\n        serverSide: true,\r\n        ajax: '/layers/getdata',\r\n        columns: [\r\n            {\r\n                //\"className\":      'details-control',\r\n                \"orderable\":      false,\r\n                \"searchable\":      false,\r\n                \"data\":           null,\r\n                \"defaultContent\":   \r\n                    '<div class=\"input-group margin\">' +\r\n                        '<div class=\"input-group-btn\">' +\r\n                            '<button type=\"button\" class=\"btn btn-default btn-xs dropdown-toggle\" data-toggle=\"dropdown\">' +\r\n                            '<span class=\"fa fa-caret-down\"></span></button>' +\r\n                            '<ul class=\"dropdown-menu\">' +\r\n                                '<li><a class=\"edit\">Edit</a></li>' +\r\n                                '<li><a class=\"hapus\">Hapus</a></li>' +\r\n                            '</ul>' +\r\n                        '</div>' +\r\n                    '</div>' \r\n                ,\r\n            },\r\n            {data: 'layername'},\r\n            {data: 'layerurl'},\r\n            {data: 'layer'},\r\n            \r\n        ],\r\n        initComplete: function () {\r\n            this.api().columns().every(function () {\r\n                var column = this;\r\n                var input = document.createElement(\"input\");\r\n                $(input).appendTo($(column.footer()).empty())\r\n                .on('change', function () {\r\n                    var val = $.fn.dataTable.util.escapeRegex($(this).val());\r\n\r\n                    column.search(val ? val : '', true, false).draw();\r\n                });\r\n            });\r\n        }\r\n        \r\n    });\r\n    $('#table_bangunan').DataTable({\r\n        processing: true,\r\n        serverSide: true,\r\n        ajax: '/kuesioner/bangunan/getdata',\r\n        columns: [\r\n            \r\n            {data: 'no_responden', name: 'no_responden'},\r\n            {data: 'nama', name: 'nama'},\r\n            {data: 'jeniskontruksi', name: 'jeniskontruksi'},\r\n            {data: 'pemanfaatanbangunan', name: 'pemanfaatanbangunan'},\r\n            {data: 'sumberinformasi', name: 'sumberinformasi'}\r\n        ],\r\n        initComplete: function () {\r\n            this.api().columns().every(function () {\r\n                var column = this;\r\n                var input = document.createElement(\"input\");\r\n                $(input).appendTo($(column.footer()).empty())\r\n                .on('change', function () {\r\n                    var val = $.fn.dataTable.util.escapeRegex($(this).val());\r\n\r\n                    column.search(val ? val : '', true, false).draw();\r\n                });\r\n            });\r\n        }\r\n    });\r\n    $('#table_bangunankotaciawi').DataTable({\r\n        processing: true,\r\n        serverSide: true,\r\n        ajax: '/kuesioner/bangunankotaciawi/getdata',\r\n        columns: [\r\n            {\r\n                //\"className\":      'details-control',\r\n                \"orderable\":      false,\r\n                \"searchable\":      false,\r\n                \"data\":           null,\r\n                \"defaultContent\":   \r\n                    '<div class=\"input-group margin\">' +\r\n                        '<div class=\"input-group-btn\">' +\r\n                            '<button type=\"button\" class=\"btn btn-default btn-xs dropdown-toggle\" data-toggle=\"dropdown\">' +\r\n                            '<span class=\"fa fa-caret-down\"></span></button>' +\r\n                            '<ul class=\"dropdown-menu\">' +\r\n                                '<li><a class=\"edit\">Edit</a></li>' +\r\n                                '<li><a class=\"hapus\">Hapus</a></li>' +\r\n                            '</ul>' +\r\n                        '</div>' +\r\n                    '</div>' \r\n                ,\r\n            },\r\n            {data: 'nama'},\r\n            {data: 'sumber'},\r\n            {data: 'tahun'},\r\n            \r\n        ],\r\n        initComplete: function () {\r\n            this.api().columns().every(function () {\r\n                var column = this;\r\n                var input = document.createElement(\"input\");\r\n                $(input).appendTo($(column.footer()).empty())\r\n                .on('change', function () {\r\n                    var val = $.fn.dataTable.util.escapeRegex($(this).val());\r\n\r\n                    column.search(val ? val : '', true, false).draw();\r\n                });\r\n            });\r\n        }\r\n        \r\n    });\r\n    \r\n}(jQuery, window, document));\r\n\r\n//Form\r\n(function($, window, document){\r\n    $('.datepicker').datepicker({\r\n        autoclose: true,\r\n        format:'yyyy-mm-dd',\r\n        startDate:'-3d'\r\n    });\r\n    $('input.numberonly').bind('keypress', function(e) {\r\n        return numeralsOnly(e);\r\n    });\r\n    $('input.letteronly').bind('keypress', function(e) {\r\n        return lettersOnly(e);\r\n    });\r\n    var checkall = 'th.check-all';\r\n    $(checkall).on('change', function() {\r\n        var $this = $(this),\r\n            index= $this.index() + 1,\r\n            checkbox = $this.find('input[type=\"checkbox\"]'),\r\n            table = $this.parents('table');\r\n        // Make sure to affect only the correct checkbox column\r\n        table.find('tbody > tr > td:nth-child('+index+') input[type=\"checkbox\"]')\r\n          .prop('checked', checkbox[0].checked);\r\n    });\r\n\r\n    var provinsi = $('select#provinsi');\r\n    var kabkota = $('select#kabkota');\r\n    var kecamatan = $('select#kecamatan');\r\n    var desa = $('select#desa');\r\n    $('.loader').hide();\r\n    /*provinsi.select2(); \r\n    //$('select#kabkota').html(\"<option value=''>Pilih Kota..</option>\"); \r\n    //$('select#kabkota').select2();\r\n    \r\n    $('select#provinsi').on('change', function (){\r\n        $('select#kabkota').html(\"<option value=''>Pilih Kota..</option>\");// add this on each call then add the options when data receives from the request\r\n        $.ajax({\r\n            url: '/getKabKota/'+$(this).val(),\r\n            dataType: \"json\",\r\n            beforeSend: function() {\r\n                $('.loader').show();\r\n            },\r\n            success: function(data) {\r\n                $('select#kabkota').empty(); \r\n            \r\n                var options = '<option value=\"0\">Pilih Kota..</option>';\r\n                for (var x = 0; x < data.length; x++) {\r\n                    options += '<option value=\"' + data[x]['kode_kabupaten'] + '\">' + data[x]['kabupaten'] + '</option>';    \r\n                }\r\n                $('select#kabkota').select2();\r\n                $('select#kabkota').html(options);\r\n                $(\"#kabkota\").trigger(\"chosen:updated\");\r\n            },\r\n            complete: function() {\r\n                $('.loader').hide();\r\n            }\r\n        });\r\n    });\r\n    //$('select#kecamatan').html(\"<option value=''>Pilih Kecamatan..</option>\"); \r\n    //$('select#kecamatan').select2();\r\n    $('select#kabkota').on('change', function (){\r\n        $('select#kecamatan').html(\"<option value=''>Pilih Kecamatan..</option>\");// add this on each call then add the options when data receives from the request\r\n        \r\n        $.ajax({\r\n            url: '/getKecamatan/'+$(this).val(),\r\n            dataType: \"json\",\r\n            beforeSend: function() {\r\n                $('.loader').show();\r\n            },\r\n            success: function(data) {\r\n                $('select#kecamatan').empty(); \r\n            \r\n                var options = '<option value=\"0\">Pilih Kecamatan..</option>';\r\n                for (var x = 0; x < data.length; x++) {\r\n                    //console.log($('#jenis_usulan').val());\r\n                    if ($('#jenis_usulan').val() == 2 || $('#jenis_usulan').val() == 3) {\r\n                        if (data[x]['lokpri'] == 1) {\r\n                            options += '<option value=\"' + data[x]['kode_kecamatan'] + '\">' + data[x]['kecamatan'] + '</option>';        \r\n                        }\r\n                    }else{\r\n                        options += '<option value=\"' + data[x]['kode_kecamatan'] + '\">' + data[x]['kecamatan'] + '</option>';\r\n                    }\r\n                }\r\n                $('select#kecamatan').select2();\r\n                $('select#kecamatan').html(options);\r\n            },\r\n            complete: function() {\r\n                $('.loader').hide();\r\n            }\r\n        });\r\n    });*/\r\n\r\n    //Load data Kecamatan\r\n    $.ajax({\r\n        url: '/getKecamatan',\r\n        dataType: \"json\",\r\n        beforeSend: function() {\r\n            $('.loader').show();\r\n            $(\"#loader-wrapper\").show();\r\n        },\r\n        success: function(data) {\r\n            kecamatan.empty(); \r\n            var options = '<option value=\"0\">Pilih Kecamatan..</option>';\r\n            for (var x = 0; x < data.length; x++) {\r\n                var selected = (data[x]['kode_kec'] == $('#kode_kec').val()) ? \"selected\":\"\";\r\n                options += '<option value=\"' + data[x]['kode_kec'] + '\"'+ selected +'>' + data[x]['nama_kecamatan'] + '</option>';\r\n            }\r\n            kecamatan.html(options);\r\n            \r\n        },\r\n        complete: function() {\r\n            $('.loader').hide();\r\n            $(\"#loader-wrapper\").hide();\r\n        }\r\n    });\r\n    kecamatan.select2();\r\n\r\n    //$('select#desa').html(\"<option value=''>Pilih Desa..</option>\");\r\n    //$('select#desa').select2();\r\n    kecamatan.on('change', function (){\r\n        $('select#desa').html(\"<option value=''>Pilih Desa..</option>\");// add this on each call then add the options when data receives from the request\r\n        \r\n        $.ajax({\r\n            url: '/getDesa/'+$(this).val(),\r\n            dataType: \"json\",\r\n            beforeSend: function() {\r\n                $('.loader').show();\r\n                $(\"#loader-wrapper\").show();\r\n            },\r\n            success: function(data) {\r\n                $('select#desa').empty(); \r\n            \r\n                var options = '<option value=\"0\">Pilih Desa..</option>';\r\n                for (var x = 0; x < data.length; x++) {\r\n                   options += '<option value=\"' + data[x]['kode_kel'] + '\">' + data[x]['nama_kelurahan'] + '</option>';\r\n                }\r\n                $('select#desa').select2();\r\n                $('select#desa').html(options);\r\n            },\r\n            complete: function() {\r\n                $('.loader').hide();\r\n                $(\"#loader-wrapper\").hide();\r\n            }\r\n        });\r\n    });\r\n        if ($('#kode_kec').val() !== null) {\r\n            $.ajax({\r\n                url: '/getDesa/'+$('#kode_kec').val(),\r\n                dataType: \"json\",\r\n                beforeSend: function() {\r\n                    $('.loader').show();\r\n                },\r\n                success: function(data) {\r\n                    $('select#desa').empty(); \r\n                \r\n                    var options = '<option value=\"0\">Pilih Desa..</option>';\r\n                    for (var x = 0; x < data.length; x++) {\r\n                        var selected = (data[x]['kode_kel'] == $('#kode_kel').val()) ? \"selected\":\"\";\r\n                        options += '<option value=\"' + data[x]['kode_kel'] + '\" '+selected+'>' + data[x]['nama_kelurahan'] + '</option>';\r\n                    }\r\n                    $('select#desa').select2();\r\n                    $('select#desa').html(options);\r\n                },\r\n                complete: function() {\r\n                    $('.loader').hide();\r\n                }\r\n            });\r\n        } \r\n\r\n    $('#checkmap').click(function(){\r\n        if (navigator.geolocation) {\r\n            navigator.geolocation.getCurrentPosition(function(position) {\r\n            var pos = {\r\n                lat: position.coords.latitude,\r\n                lng: position.coords.longitude\r\n            };\r\n            $('input[name=latitude]').val(position.coords.latitude);\r\n            $('input[name=longitude]').val(position.coords.longitude);\r\n          }, function() {\r\n            \r\n          });\r\n        } else {\r\n          // Browser doesn't support Geolocation\r\n          alert('Browser anda tidak mendukung Geolocation');\r\n         \r\n        }        \r\n    });\r\n\r\n    if ($(\".tinymce_sismiop\").length > 0) {\r\n        tinymce.init({\r\n            selector: \".tinymce_sismiop\",\r\n            theme: \"modern\",\r\n                        //skin: \"light\",\r\n            //width: 600,\r\n            //height: 200,    \r\n            /*plugins: [\r\n                \"advlist autolink link image lists charmap print preview hr anchor pagebreak\",\r\n                \"searchreplace wordcount visualblocks visualchars insertdatetime media nonbreaking spellchecker\",\r\n                \"table contextmenu directionality emoticons paste textcolor responsivefilemanager code \"\r\n            ],*/\r\n            plugins: [\r\n                \"advlist autolink link image lists charmap print preview hr anchor pagebreak\",\r\n                \"searchreplace wordcount media nonbreaking spellchecker\",\r\n                \"table contextmenu directionality emoticons paste textcolor responsivefilemanager code \"\r\n            ],\r\n            relative_urls: false,\r\n            browser_spellcheck : true ,\r\n            filemanager_title:\"Responsive Filemanager\",\r\n            external_filemanager_path:\"http://\"+window.location.hostname+\":\"+window.location.port+\"/filemanager/\",\r\n            external_plugins: { \"filemanager\" : \"../../../filemanager/plugin.min.js\"},\r\n            codemirror: {\r\n                indentOnInit: true, // Whether or not to indent code on init. \r\n                path: 'CodeMirror'\r\n            },  \r\n            image_advtab: true,\r\n            toolbar1: \"undo redo | bold italic underline | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | styleselect\",\r\n            toolbar2: \"| responsivefilemanager | image | media | link unlink anchor | print preview code  | youtube | qrcode | flickr | picasa | easyColorPicker\"\r\n        });    \r\n    }\r\n\r\n    \r\n}(jQuery, window, document));\r\n\r\n"]}