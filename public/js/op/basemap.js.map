{"version":3,"sources":["basemap.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"basemap.js","sourcesContent":["window.basemapTools = {};\r\nvar basemapTools = window.basemapTools;\r\nfunction initBasemap(tools,map){    \r\n    var div = document.createElement('div');\r\n    div.id = 'divBasemap';\r\n    div.className = '';\r\n    var selectDom = document.createElement('select');\r\n    selectDom.className = 'form-control';\r\n    var options = '';\r\n    for (var x = 0; x < basemapSource().length; x++) {\r\n        var data = basemapSource();\r\n        options += '<option value=\"' + data[x] +'\">' + data[x] + '</option>';\r\n    }\r\n    selectDom.innerHTML = options;\r\n    $(selectDom).change(function(e) {\r\n       console.log($(this).val());\r\n       \r\n       \r\n    });\r\n    div.appendChild(selectDom);\r\n    var basemap = document.getElementById(tools);\r\n    basemap.appendChild(div);\r\n}\r\n\r\nbasemapTools.basemapControl = function(opt_options) {\r\n    var options = opt_options || {};\r\n\r\n    var this_ = this;\r\n    var basemapSource = function(){\r\n        return ['esri_topo','esri_terrain','esri_street','esri_image','esri_natgeo','esri_ocean','osm']\r\n    }\r\n    var findLayerBy = function(layer, key, value) {\r\n        \r\n        if (layer.get(key) === value) {\r\n            return layer;\r\n        }\r\n        \r\n        if (layer.getLayers) {\r\n            var layers = layer.getLayers().getArray(),len = layers.length, result;\r\n            for (var i = 0; i < len; i++) {\r\n                result = findLayerBy(layers[i], key, value);\r\n                if (result) {\r\n                  return result;\r\n                }\r\n            }\r\n        }\r\n        \r\n        return null;\r\n    }\r\n    var changeBasemap = function(_b){\r\n        var basemap = findLayerBy(window.map.getLayerGroup(), 'id', 'basemap');\r\n        if(basemap.get('isBasemap')){\r\n            if(_b == 'esri_topo'){\r\n                basemap.getSource().setUrl('http://services.arcgisonline.com/arcgis/rest/services/World_Topo_Map/MapServer/tile/{z}/{y}/{x}');\r\n            }else if(_b == 'esri_terrain'){\r\n                basemap.getSource().setUrl('http://services.arcgisonline.com/arcgis/rest/services/World_Terrain_Base/MapServer/tile/{z}/{y}/{x}');\r\n            }else if(_b == 'esri_street'){\r\n                basemap.getSource().setUrl('http://services.arcgisonline.com/arcgis/rest/services/World_Street_Map/MapServer/tile/{z}/{y}/{x}');\r\n            }else if(_b == 'esri_image'){\r\n                basemap.getSource().setUrl('http://services.arcgisonline.com/arcgis/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}');\r\n            }else if(_b == 'esri_natgeo'){\r\n                basemap.getSource().setUrl('http://services.arcgisonline.com/arcgis/rest/services/NatGeo_World_Map/MapServer/tile/{z}/{y}/{x}');\r\n            }else if(_b == 'esri_ocean'){\r\n                basemap.getSource().setUrl('http://services.arcgisonline.com/arcgis/rest/services/Ocean_Basemap/MapServer/tile/{z}/{y}/{x}');\r\n            }else{\r\n                basemap.setSource(new ol.source.OSM());\r\n            }\r\n        }\r\n    }\r\n\r\n    var div = document.createElement('div');\r\n    div.id = 'divBasemap';\r\n    div.className = 'basemapTools ol-unselectable ol-control';\r\n    var selectDom = document.createElement('select');\r\n    selectDom.className = 'form-control';\r\n    var options = '';\r\n    for (var x = 0; x < basemapSource().length; x++) {\r\n        var data = basemapSource();\r\n        options += '<option value=\"' + data[x] +'\">' + data[x] + '</option>';\r\n    }\r\n    selectDom.innerHTML = options;\r\n    basemapTools.map = window.map;\r\n    $(selectDom).change(function(e) {\r\n       console.log($(this).val());\r\n       changeBasemap($(this).val());\r\n    });\r\n    div.appendChild(selectDom);\r\n    //var basemap = document.getElementById(tools);\r\n    //basemap.appendChild(div);\r\n\r\n    ol.control.Control.call(this, {\r\n        element: div,\r\n        target: options.target\r\n    });\r\n\r\n    \r\n}\r\nol.inherits(basemapTools.basemapControl, ol.control.Control);\r\n\r\n"]}