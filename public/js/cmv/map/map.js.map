{"version":3,"sources":["geolocation.js","traffic.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACnIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"map.js","sourcesContent":["//Geolocation\r\nvar markerGeolocation;\r\nvar animationInterval;\r\nvar watchpositionstatus=false;\r\nvar positionTimer;\r\nvar secondChild;\r\n\r\nfunction initGeolocation(map) {\r\n    var controlDiv = document.createElement('div');\r\n\r\n    var firstChild = document.createElement('button');\r\n    firstChild.style.backgroundColor = '#fff';\r\n    firstChild.style.border = 'none';\r\n    firstChild.style.outline = 'none';\r\n    firstChild.style.width = '28px';\r\n    firstChild.style.height = '28px';\r\n    firstChild.style.borderRadius = '2px';\r\n    firstChild.style.boxShadow = '0 1px 4px rgba(0,0,0,0.3)';\r\n    firstChild.style.cursor = 'pointer';\r\n    firstChild.style.marginRight = '10px';\r\n    firstChild.style.marginLeft = '10px';\r\n    firstChild.style.padding = '0';\r\n    firstChild.title = 'Your Location';\r\n    controlDiv.appendChild(firstChild);\r\n\r\n    secondChild = document.createElement('div');\r\n    secondChild.style.margin = '5px';\r\n    secondChild.style.width = '18px';\r\n    secondChild.style.height = '18px';\r\n    secondChild.style.backgroundImage = 'url(https://maps.gstatic.com/tactile/mylocation/mylocation-sprite-2x.png)';\r\n    secondChild.style.backgroundSize = '180px 18px';\r\n    secondChild.style.backgroundPosition = '0 0';\r\n    secondChild.style.backgroundRepeat = 'no-repeat';\r\n    firstChild.appendChild(secondChild);\r\n\r\n    google.maps.event.addListener(map, 'center_changed', function () {\r\n        secondChild.style['background-position'] = '0 0';\r\n    });\r\n\r\n    firstChild.addEventListener('click', function () {\r\n        var imgX = '0';\r\n        animationInterval = setInterval(function () {\r\n                imgX = imgX === '-18' ? '0' : '-18';\r\n                secondChild.style['background-position'] = imgX+'px 0';\r\n            }, 500);\r\n\r\n        /*if(navigator.geolocation) {\r\n            //console.log(\"Navi\",navigator.geolocation.getCurrentPosition());\r\n            navigator.geolocation.getCurrentPosition(function(position) {\r\n                var latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);\r\n\r\n                map.setCenter(latlng);\r\n                clearInterval(animationInterval);\r\n                secondChild.style['background-position'] = '-144px 0';\r\n            });\r\n        } else {\r\n            clearInterval(animationInterval);\r\n            secondChild.style['background-position'] = '0 0';\r\n        }*/\r\n        geolocation();\r\n\r\n    });\r\n\r\n    controlDiv.index = 1;\r\n    map.controls[google.maps.ControlPosition.LEFT_TOP].push(controlDiv);\r\n}\r\nfunction geolocation(){\r\n  stopWatch();\r\n  if (navigator.geolocation) {\r\n    navigator.geolocation.getCurrentPosition(displayAndWatch, locError, {\r\n      enableHighAccuracy : true,\r\n      timeout : 60000,\r\n      maximumAge : 0\r\n    });\r\n  } else {\r\n    clearInterval(animationInterval);\r\n    secondChild.style['background-position'] = '0 0';\r\n    alert(\"Your phone does not support the Geolocation API\");\r\n  }\r\n\r\n}\r\nfunction addMarkerGeolocation(latlng) {\r\n    markerGeolocation = new google.maps.Marker({\r\n        map: map,\r\n        position: latlng,\r\n        draggable: true,\r\n        //icon: host+'images/maps/you-are-here-2.png'\r\n    });\r\n}\r\nfunction locError(error) {\r\n\t// the current position could not be located\r\n\talert(\"The current position could not be found!\");\r\n}\r\nfunction displayAndWatch(position) {\r\n    // set current position\r\n    setUserLocation(position);\r\n    // watch position\r\n    watchCurrentPosition();\r\n}\r\nfunction setUserLocation(pos) {\r\n    // marker for userLocation\r\n    var latlng = new google.maps.LatLng(pos.coords.latitude, pos.coords.longitude);\r\n\r\n    map.setCenter(latlng);\r\n    clearInterval(animationInterval);\r\n\r\n    secondChild.style['background-position'] = '-144px 0';\r\n    markerGeolocation = new google.maps.Marker({\r\n      map : map,\r\n      position : new google.maps.LatLng(pos.coords.latitude, pos.coords.longitude),\r\n      title : \"You are here\",\r\n      icon : \"http://localhost/images/maps/you-are-here-2.png\",\r\n\t  });\r\n    // scroll to userLocation\r\n    //map.panTo(new google.maps.LatLng(pos.coords.latitude, pos.coords.longitude));\r\n}\r\nfunction watchCurrentPosition() {\r\n    //watchpositionstatus = true;\r\n    positionTimer = navigator.geolocation.watchPosition(function(position) {\r\n        setMarkerPosition(markerGeolocation, position);\r\n        map.panTo(new google.maps.LatLng(position.coords.latitude, position.coords.longitude));\r\n    });\r\n}\r\nfunction setMarkerPosition(marker, position) {\r\n     marker.setPosition(new google.maps.LatLng(position.coords.latitude, position.coords.longitude));\r\n     console.log(position);\r\n}\r\nfunction stopWatch(){\r\n  console.log(\"Stop watchPosition\");\r\n  navigator.geolocation.clearWatch(positionTimer);\r\n}\r\n","var trafficLayerToggle = false;\r\nfunction initTraffic(map) {\r\n  var trafficLayer = new google.maps.TrafficLayer();\r\n  if (trafficLayerToggle) {\r\n      trafficLayer.setMap(map);\r\n  }\r\n}\r\nfunction TrafficControl(controlDiv,map) {\r\n  var control = this;\r\n  control.center_ = center;\r\n  controlDiv.style.clear = 'both';\r\n  var TrafficUI = document.createElement('div');\r\n  TrafficUI.id = 'TrafficUI';\r\n  TrafficUI.title = 'Traffic Layer';\r\n  controlDiv.appendChild(TrafficUI);\r\n\r\n  var input = document.createElement('input');\r\n  input.id = 'pac-input';\r\n  input.type = 'checkbox';\r\n  TrafficUI.appendChild(input);\r\n}\r\nfunction changeTraffic() {\r\n  if (trafficLayerToggle == true) {\r\n    trafficLayerToggle = false\r\n  }else {\r\n    trafficLayerToggle = true;\r\n  }\r\n}\r\n"]}